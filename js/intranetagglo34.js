(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={intranetagglo34:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1790:function(t,e,n){},3423:function(t,e,n){},"3e16":function(t,e,n){},"429e":function(t,e,n){"use strict";n("553f")},4630:function(t,e,n){"use strict";n("8749")},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=i,t.exports=a,a.id="4678"},5341:function(t,e,n){},"553f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"Home",class:t.darkmodestring,attrs:{id:"Home",pattern:t.patterns,variant:t.backgroundcolor}},[n("div",{staticClass:"settings-box"},[n("b-icon",{staticClass:"cog",attrs:{id:"cog",name:"cog",icon:"gear"}}),n("label",{staticStyle:{position:"absolute"},attrs:{for:"cog"}},[t._v("Paramètres")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.darkmode,expression:"darkmode"}],staticClass:"checkbox",attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.darkmode)?t._i(t.darkmode,null)>-1:t.darkmode},on:{change:function(e){var n=t.darkmode,s=e.target,a=!!s.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);s.checked?o<0&&(t.darkmode=n.concat([i])):o>-1&&(t.darkmode=n.slice(0,o).concat(n.slice(o+1)))}else t.darkmode=a}}}),n("label",{staticClass:"label",attrs:{for:"checkbox"}},[n("b-icon",{staticStyle:{color:"#f1c40f"},attrs:{icon:"moon"}}),n("b-icon",{staticStyle:{color:"#f39c12"},attrs:{icon:"sun"}}),n("div",{staticClass:"ball"})],1)],1),n("Settings",{staticClass:"Settings hidden",attrs:{id:"Settings"}}),n("Navigation",{staticClass:"Navbar"}),n("News")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav"},[n("div",{staticClass:"sidenav-logo"},[n("img",{attrs:{src:t.image}})]),n("div",{staticClass:"sidenav-menu"},t._l(t.sectionArray,(function(e,s){return n("div",{key:"B"+s,staticClass:"section-block"},[n("button",{staticClass:"section"},[n("div",{staticClass:"section-icon"},[n("b-icon",{attrs:{icon:e.icon}})],1),n("div",{staticClass:"section-title"},[t._v(t._s(e.title))])]),t._l(t.menusArray[s],(function(e,a){return n("div",{key:"B"+a,staticClass:"menu",attrs:{id:"menu-"+s+"-"+a},on:{click:function(e){return t.ExtendSubMenu(s,a)}}},[n("div",{staticClass:"submenu-title",on:{click:function(n){t.OpenLink(e.link,t.isEmpty(t.submenusArray[s][a]))}}},[t.isEmpty(t.submenusArray[s][a])?t._e():n("div",{staticClass:"caret"},[t._v("▷")]),t._v(" "+t._s(e.title)+" ")]),n("div",{staticClass:"menu-container",attrs:{id:"container-"+s+"-"+a}},t._l(t.submenusArray[s][a],(function(e,s){return n("a",{key:"B"+s,staticClass:"nav-link text-truncate",attrs:{href:e.link}},[n("span",{staticClass:"d-sm-inline"},[t._v(t._s(e.title))])])})),0)])}))],2)})),0),n("div",{staticClass:"Raccourcis"},[t.isAdmin?n("MenuUpdate"):t._e(),n("a",{staticClass:"Files",attrs:{href:"https://cloud.ca2bm.fr/index.php/f/1183804"}},[n("b-icon",{staticClass:"doc-icon",attrs:{icon:"folder"}}),n("div",[t._v("Documents")])],1)],1)])},r=[],c=(n("caad"),n("2532"),n("f7b4")),l=n.n(c),u=n("6ca4"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"admin-settings",on:{click:function(e){t.global=!t.global}}},[n("b-icon",{staticClass:"doc-icon",attrs:{icon:"gear"}}),n("div",[t._v("Modifier le menu")])],1),n("b-modal",{ref:"modal",attrs:{id:"menumodal1",size:"xl"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification du Menu de navigation")]},proxy:!0}]),model:{value:t.global,callback:function(e){t.global=e},expression:"global"}},[n("div",{staticStyle:{display:"block",position:"relative",height:"fit-content"}},[n("div",{staticClass:"menu-table"},[n("div",{staticClass:"table-header"},[t._v("Section")]),n("div",{staticClass:"table-header"},[t._v("Menu")]),n("div",{staticClass:"table-header"},[t._v("Sous-Menu")]),n("div",{staticClass:"table-content"},[t._l(t.sectionArray,(function(e,s){return n("div",{key:s,staticClass:"table-section"},[n("div",{staticClass:"table-block",attrs:{position:s+"-0-0",type:"text"}},[t._v(" "+t._s(e.title)+" "),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)]),n("div",[t._l(t.menusArray[s],(function(e,a){return n("div",{key:a,staticClass:"table-menu"},[n("div",{staticClass:"table-block",attrs:{position:s+"-"+(a+1)+"-0",type:"text"}},[n("div",[t._v(t._s(e.title))]),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)]),n("div",{staticClass:"table-submenu"},[t._l(t.submenusArray[s][a],(function(e,i){return n("div",{key:i,staticClass:"table-submenu-content"},[n("div",{staticClass:"table-block",attrs:{position:s+"-"+(a+1)+"-"+(i+1),type:"text"}},[n("div",[t._v(t._s(e.title))]),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)])])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(100% - 10px)"},on:{click:function(e){return t.AddSubmenu(t.submenusArray[s][a],s,a)}}},[t._v("+")])],2)])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(50% - 10px)"},on:{click:function(e){return t.AddMenu(t.menusArray[s],s)}}},[t._v("+")])],2)])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(33% - 10px)"},on:{click:function(e){return t.AddSection(t.sectionArray)}}},[t._v("+")])],2)])])]),n("b-modal",{ref:"modal",attrs:{id:"menumodal2",size:"xl"},on:{ok:t.Save},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification du Menu de navigation")]},proxy:!0}]),model:{value:t.detailed,callback:function(e){t.detailed=e},expression:"detailed"}},[n("div",{staticClass:"menu-form"},[n("div",[n("label",{attrs:{for:"title"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"title",type:"text"},model:{value:t.modifying.title,callback:function(e){t.$set(t.modifying,"title",e)},expression:"modifying.title"}})],1),1!=t.modifying.haschild?n("div",[n("label",{attrs:{for:"link"}},[t._v("Lien URL")]),n("b-form-input",{attrs:{name:"link",type:"text"},model:{value:t.modifying.link,callback:function(e){t.$set(t.modifying,"link",e)},expression:"modifying.link"}})],1):t._e(),null!=t.modifying.icon?n("div",[n("label",{attrs:{for:"icon"}},[t._v("icon (only Section)")]),n("b-form-input",{attrs:{name:"icon",type:"text"},model:{value:t.modifying.icon,callback:function(e){t.$set(t.modifying,"icon",e)},expression:"modifying.icon"}})],1):t._e(),n("label",{attrs:{for:"groups"}},[t._v("Groupes")]),n("b-form-tags",{staticClass:"mb-2",attrs:{id:"tags-component-select",name:"groups",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.tags,a=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[s.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(s,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",a,!1),i))]}}]),model:{value:t.modifying.groups,callback:function(e){t.$set(t.modifying,"groups",e)},expression:"modifying.groups"}})],1)])],1)},p=[],m=n("1da1"),f=(n("96cf"),n("4de4"),n("c740"),n("a434"),n("9911"),n("ac1f"),n("1276"),n("7db0"),n("a15b"),{name:"NewsUpdate",computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.modifying.groups.indexOf(e)}))},sectionArray:function(){for(var t=this.menusInBDD,e=[],n=0;n<t.length;n++)for(var s=0;s<t.length;s++)t[n].position==s+"-0-0"&&e.push(t[n]);return e},menusArray:function(){for(var t=this.menusInBDD,e=[],n=[],s=0;s<this.sectionArray.length;s++){for(var a=0;a<t.length;a++)for(var i=0;i<t.length;i++)t[a].position==s+"-"+(i+1)+"-0"&&n.push(t[a]);e.push(n),n=[]}return e},submenusArray:function(){for(var t=this.menusInBDD,e=[],n=[],s=[],a=0;a<this.sectionArray.length;a++){for(var i=0;i<this.menusArray[a].length;i++){for(var o=0;o<t.length;o++)for(var r=0;r<t.length;r++)t[o].position==a+"-"+(i+1)+"-"+(r+1)&&s.push(t[o]);n.push(s),s=[]}e.push(n),n=[]}return e}},methods:{DeleteVerification:function(t){var e=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer ce menu : ".concat(t.title),{title:"Confirmation",id:"menumodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){if(n){var s=e.menusInBDD.findIndex((function(e){return e.title===t.title}));"Nouvelle Section"==t.title||"Nouveau Menu"==t.title||"Nouveau Sous-Menu"==t.title?e.apps.splice(s,1):(e.apps.splice(s,1),e.deleteMenu(t.id))}})).catch((function(t){}))},Modify:function(t){this.modifying.selected=t.position,this.modifying.title=t.title,this.modifying.link=t.link,this.modifying.icon=null,this.modifying.groups=t.groups.split(";");var e=t.position.split("-");0==e[1]?(this.modifying.icon=t.icon,0==this.menusArray[0].length?this.modifying.haschild=!1:this.modifying.haschild=!0):0==e[2]?0==this.submenusArray[e[0]][e[1]-1].length?this.modifying.haschild=!1:this.modifying.haschild=!0:this.modifying.haschild=!1,this.detailed=!this.detailed},Save:function(){var t=this,e=this.menusInBDD.find((function(e){return e.position===t.modifying.selected}));"Nouvelle Section"==e.title||"Nouveau Menu"==e.title||"Nouveau Sous-Menu"==e.title?(e.title=this.modifying.title,null!=this.modifying.link?e.link=this.modifying.link:e.link="",null!=this.modifying.icon?e.icon=this.modifying.icon:e.icon="",e.groups=this.modifying.groups.join(";"),this.createMenu(e)):(e.title=this.modifying.title,null!=this.modifying.link?e.link=this.modifying.link:e.link="",null!=this.modifying.icon?e.icon=this.modifying.icon:e.icon="",e.groups=this.modifying.groups.join(";"),this.updateMenu(e))},AddSubmenu:function(t,e,n){this.menusInBDD.push({title:"Nouveau Sous-Menu",icon:"",link:"",groups:"",position:e+"-"+(n+1)+"-"+(t.length+1)})},AddMenu:function(t,e){this.menusInBDD.push({title:"Nouveau Menu",icon:"",link:"",groups:"",position:e+"-"+(t.length+1)+"-0"})},AddSection:function(t){this.menusInBDD.push({title:"Nouvelle Section",icon:"exclamation-triangle",link:"",groups:"",position:t.length+"-0-0"})},createMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/menus",n.next=4,l.a.post(Object(u["generateUrl"])(s),t,{type:"application/json"});case 4:a=n.sent,e.LastModifiedID=a.data.id,e.menusInBDD.find((function(t){return t.position===e.modifying.selected})).id=a.data.id,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error(n.t0);case 12:e.$store.commit("setMenuUpdating",!0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/menus/".concat(t.id),n.next=4,l.a.post(Object(u["generateUrl"])(s),t,{type:"application/json"});case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setMenuUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},deleteMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/menus/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(s,{id:t}));case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setMenuUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},data:function(){return{global:!1,detailed:!1,updating:!1,menusInBDD:[],modifying:{selected:null,title:"",link:"",icon:"",groups:"",haschild:!1},LastModifiedID:null}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/menus");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.menusInBDD=e.data}))}}),g=f,b=(n("a234"),n("2877")),h=Object(b["a"])(g,d,p,!1,null,"7045c2c8",null),v=h.exports,y={name:"Navigation",components:{MenuUpdate:v},data:function(){return{image:"/nextcloud/apps/intranetagglo/img/LogoCA2BM.png",user:[],lastOpenedContainer:null,menusInBDD:[]}},watch:{updating:function(t){var e=this;t&&l.a.get(Object(u["generateUrl"])("apps/intranetagglo".concat("/menusG"))).then((function(t){e.menusInBDD=t.data,e.$store.commit("setMenuUpdating",!1)}))}},computed:{updating:function(){return this.$store.state.menuupdating},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},sectionArray:function(){for(var t=this.menusInBDD,e=[],n=0;n<t.length;n++)for(var s=0;s<t.length;s++)t[n].position==s+"-0-0"&&e.push(t[n]);return e},menusArray:function(){for(var t=this.menusInBDD,e=[],n=[],s=0;s<this.sectionArray.length;s++){for(var a=0;a<t.length;a++)for(var i=0;i<t.length;i++)t[a].position==s+"-"+(i+1)+"-0"&&n.push(t[a]);e.push(n),n=[]}return e},submenusArray:function(){for(var t=this.menusInBDD,e=[],n=[],s=[],a=0;a<this.sectionArray.length;a++){for(var i=0;i<this.menusArray[a].length;i++){for(var o=0;o<t.length;o++)for(var r=0;r<t.length;r++)t[o].position==a+"-"+(i+1)+"-"+(r+1)&&s.push(t[o]);n.push(s),s=[]}e.push(n),n=[]}return e}},methods:{isEmpty:function(t){return!(t.length>0)},OpenLink:function(t,e){""!=t&&e&&window.open(t,"_blank")},CategorySet:function(t){this.droptext=t,this.$store.commit("updateCategories",t)},ExtendSubMenu:function(t,e){null!=this.lastOpenedContainer&&this.lastOpenedContainer!=t+"-"+e&&(document.getElementById("menu-"+this.lastOpenedContainer).firstChild.classList.toggle("active"),document.getElementById("container-"+this.lastOpenedContainer).classList.toggle("active")),document.getElementById("menu-"+t+"-"+e).firstChild.classList.toggle("active"),document.getElementById("container-"+t+"-"+e).classList.toggle("active"),this.lastOpenedContainer==t+"-"+e?this.lastOpenedContainer=null:this.lastOpenedContainer=t+"-"+e}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/menusG");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.menusInBDD=e.data}))}},w=y,k=(n("429e"),Object(b["a"])(w,o,r,!1,null,"099d4448",null)),_=k.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"settings-wrapper"},[n("h2",{staticClass:"settings-title"},[t._v("Paramètres")]),n("b-icon",{staticClass:"settings-close",attrs:{id:"close",icon:"x-circle-fill"}}),t._m(0)],1)])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-block"},[n("h5",{staticClass:"settings-label"},[t._v("motifs du fond")]),n("select",{staticClass:"settings-pattern-select",attrs:{id:"pattern-select"}},[n("option",{attrs:{value:"1"}},[t._v("modele 1")]),n("option",{attrs:{value:"2"}},[t._v("modele 2")]),n("option",{attrs:{value:"3"}},[t._v("modele 3")]),n("option",{attrs:{value:"4"}},[t._v("modele 4")]),n("option",{attrs:{value:"5"}},[t._v("modele 5")]),n("option",{attrs:{value:"6"}},[t._v("modele 6")]),n("option",{attrs:{value:"7"}},[t._v("modele 7")])]),n("h5",{staticClass:"settings-label"},[t._v("couleur du fond")]),n("select",{staticClass:"settings-pattern-select",attrs:{id:"variant-select"}},[n("option",{attrs:{value:"1"}},[t._v("variante 1")]),n("option",{attrs:{value:"2"}},[t._v("variante 2")])])])}],x={name:"Settings",data:function(){return{patterns:"2",backgroundcolor:"2"}},mounted:function(){var t=document.getElementById("pattern-select"),e=document.getElementById("variant-select");function n(){document.getElementById("Settings").classList.toggle("hidden"),document.getElementById("apps-container").classList.toggle("hidden")}function s(t){var e=document.createAttribute("pattern");e.value=t.target.value,localStorage.setItem("patterns",t.target.value),document.getElementById("Home").attributes.setNamedItem(e)}function a(t){var e=document.createAttribute("variant");e.value=t.target.value,localStorage.setItem("variant",t.target.value),document.getElementById("Home").attributes.setNamedItem(e)}t.children[parseInt(this.patterns)-1].setAttribute("selected","selected"),e.children[parseInt(this.backgroundcolor)-1].setAttribute("selected","selected"),document.getElementById("close").addEventListener("click",n),document.getElementById("pattern-select").addEventListener("change",s),document.getElementById("variant-select").addEventListener("change",a)},created:function(){var t=localStorage.getItem("patterns"),e=localStorage.getItem("variant");t&&(this.patterns=t),e&&(this.backgroundcolor=e)}},A=x,O=Object(b["a"])(A,j,C,!1,null,null,null),S=O.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"news-frame"}},[n("div",{staticClass:"news-container",attrs:{id:"news-container"}},[n("div",{class:t.isAdmin?"news-header admin-view":"news-header"},[n("h2",{staticClass:"news-header-title"},[t._v("Actualités")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"searchbar",attrs:{type:"text",placeholder:"Rechercher.."},domProps:{value:t.search},on:{change:function(e){return t.textSearch()},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.isAdmin?n("NewsAdd"):t._e()],1),n("div",{staticClass:"news-row",attrs:{id:"news-row",focus:t.newfocus}},[t._l(t.getNews,(function(e,s){return n("NewsComp",{key:s,attrs:{id:"news"+s,arrayid:s,news:t.news[s]}})})),""!=t.newfocus?n("b-icon",{staticClass:"news-return",attrs:{icon:"arrow-return-left"},on:{click:function(e){return t.closeNews()}}}):t._e()],2),n("b-pagination",{staticClass:"news-pagination",attrs:{pills:"","total-rows":t.rows,"per-page":3},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),n("Apps",{staticClass:"Apps"})],1)},N=[],M=(n("841c"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news news-customcolor",style:"--news-color: "+t.newscolor},[n("div",{staticClass:"news-textbox"},[n("div",{staticClass:"news-textbox-block",attrs:{id:"news-textbox-block"+t.news.id,noimg:""==t.news.photo},on:{click:function(e){return t.OpenNews()}}},[n("div",{staticClass:"news-title"},[t._v(t._s(t.news.title))]),n("div",{staticClass:"news-subtitle",class:{active:t.isActive}},[t._v(t._s(t.news.subtitle))]),n("div",{staticClass:"news-bar"}),""!=t.news.photo&&""==t.newfocus?n("img",{staticClass:"news-img-preview",attrs:{src:t.news.photo}}):t._e(),n("div",{staticClass:"news-description",domProps:{innerHTML:t._s(t.news.text)}})]),n("div",{staticClass:"news-img-container"},[""!=t.news.photo?n("img",{staticClass:"news-img",attrs:{src:t.news.photo}}):t._e()]),n("div",{staticClass:"news-tagbox"},[n("span",{staticClass:"news-tag",on:{click:function(e){t.search="#"+t.news.category}}},[t._v(t._s(t.news.category))]),t.isAdmin?n("button",{staticClass:"news-pin-button",attrs:{type:"button"},on:{click:function(e){return t.SetPinned(t.news)}}},[1==t.news.pinned?n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"shift-fill"}}):n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"shift"}})],1):t._e(),t.isAdmin?t._e():n("div",{staticClass:"news-tagbox-button"},[1==t.news.pinned?n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"shift-fill"}}):t._e()],1),t.isAdmin&&0==t.news.visible?n("div",{staticClass:"news-tagbox-button"},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"eye-slash"},on:{click:function(e){return t.ChangeVisibility(t.news)}}})],1):t._e(),t.isAdmin?n("button",{staticClass:"news-tagbox-button",attrs:{type:"button"},on:{click:function(e){return t.AdminOptions()}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"gear"}})],1):t._e(),n("div",{staticClass:"flip-tagbox",attrs:{adminopt:t.adminopt}},[n("div",{staticClass:"flip-tagbox-inner"},[n("div",{staticClass:"news-tag-date"},[t._v(t._s(t.getFormatedDate))]),n("div",{staticClass:"admin-tagbox"},[t.isAdmin?n("button",{staticClass:"news-visibility-button",attrs:{type:"button"},on:{click:function(e){return t.ChangeVisibility(t.news)}}},[1==t.news.visible?n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"eye"}}):n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"eye-slash"}})],1):t._e(),t.isAdmin?n("NewsUpdate",{attrs:{autocomplete:t.news}}):t._e(),t.isAdmin?n("button",{staticClass:"news-del-button",attrs:{type:"button"},on:{click:function(e){return t.DeleteVerification(t.news)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1):t._e()],1)])])])])])}),I=[],U=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"news-update-button",attrs:{type:"button"},on:{click:function(e){t.modal=!t.modal}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}}),n("b-modal",{ref:"modal",attrs:{id:"newsmodal1",size:"xl"},on:{ok:t.UpdNews},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Ajouter une "),n("code",{staticStyle:{"font-size":"1.25rem"}},[t._v("Actualité")])]},proxy:!0},{key:"modal-footer",fn:function(e){var s=e.ok,a=e.cancel;return[n("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return a()}}},[t._v("Annuler")]),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(t){return s()}}},[t._v("Modifier")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-table-simple",{attrs:{id:"news-table",small:"","caption-top":"",stacked:""}},[n("caption",[t._v("sont obligatoires : Titre, Le contenu de l'actualité")]),n("b-tbody",[n("b-tr",[n("b-th",[n("label",{attrs:{for:"titre"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"titre",required:""},model:{value:t.autocomplete.title,callback:function(e){t.$set(t.autocomplete,"title",e)},expression:"autocomplete.title"}})],1),n("b-th",[n("label",{attrs:{for:"subtitle"}},[t._v("Sous-titre")]),n("b-form-input",{attrs:{name:"subtitle",required:""},model:{value:t.autocomplete.subtitle,callback:function(e){t.$set(t.autocomplete,"subtitle",e)},expression:"autocomplete.subtitle"}})],1),n("b-th",[n("label",{attrs:{for:"category"}},[t._v("Catégorie")]),n("b-form-input",{attrs:{name:"catecogry",list:"categoryoptions"},model:{value:t.autocomplete.category,callback:function(e){t.$set(t.autocomplete,"category",e)},expression:"autocomplete.category"}}),n("datalist",{attrs:{id:"categoryoptions"}},[n("option",[t._v("Manual Option")]),t._l(t.categoryoptions,(function(e,s){return n("option",{key:s},[t._v(t._s(e))])}))],2)],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"groups-component-select"}},[t._v("Restrictions de Groupes d'utilisateurs")]),n("b-form-tags",{staticClass:"mb-2",attrs:{name:"groups-component-select",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.tags,a=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[s.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(s,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",a,!1),i))]}}]),model:{value:t.autocomplete.groups,callback:function(e){t.$set(t.autocomplete,"groups",e)},expression:"autocomplete.groups"}})],1)],1),n("b-tr",[n("b-th",{attrs:{colspan:"4"}},[n("label",{attrs:{for:"text"}},[t._v("Contenu de l'actualité")]),n("VueTrix",{attrs:{name:"text",inputId:"editor1",placeholder:"Contenu de l'actualité une fois étendue..."},model:{value:t.autocomplete.text,callback:function(e){t.$set(t.autocomplete,"text",e)},expression:"autocomplete.text"}})],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"photo"}},[t._v("Image d'illustration / Photo")]),n("b-form-file",{attrs:{name:"photo",size:"sm",accept:"image/*",placeholder:"Choisir le fichier (.jpg/.jpeg/.png)...","drop-placeholder":"Placer l'image ici ..."},model:{value:t.newimage,callback:function(e){t.newimage=e},expression:"newimage"}})],1)],1)],1),n("b-tfoot")],1)],1)])],1)}),D=[],z=(n("b0c0"),n("ff0b")),B=n("5a30"),E=n.n(B),L={name:"NewsAdd",components:{VueTrix:z["a"]},props:{autocomplete:Array},computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.autocomplete.groups.indexOf(e)}))},shortdesccount:function(){return 190-this.shortdesc.length},categoryoptions:function(){this.$store.state.categoryoptions}},methods:{UpdNews:function(){this.autocomplete.author=this.$store.state.username,this.autocomplete.groups=this.autocomplete.groups.join(";"),this.updateNews(this.autocomplete,this.newimage)},updateNews:function(t,e){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:try{a=new E.a,a.append("id",t.id),a.append("title",t.title),a.append("subtitle",t.subtitle),a.append("text",t.text),null!=e&&a.append("photo_upd",e,e.name),a.append("photolink",t.photo),a.append("category",t.category),a.append("groups",t.groups),l.a.post(Object(u["generateUrl"])("apps/intranetagglo/news/update/".concat(t.id)),a,{headers:{accept:"application/json","Content-Type":"multipart/form-data; boundary=".concat(a._boundary)}})}catch(i){console.error(i)}n.$store.commit("setNewsUpdating",!0);case 2:case"end":return s.stop()}}),s)})))()},toggleModal:function(){this.$refs["modal"].toggle("#toggle-btn")},formatdesc:function(t){return t.substring(0,190)},addphotos:function(t){return t.push(null)},addpdf:function(t){return t.push(null)}},mounted:function(){this.autocomplete.groups=this.autocomplete.groups.split(";")},data:function(){return{modal:!1,newcategory:"",categoryoptions:[],test:"",newimage:null}}},T=L,R=Object(b["a"])(T,U,D,!1,null,null,null),P=R.exports,V=n("36a2"),q=n.n(V),G={name:"NewsComp",components:{NewsUpdate:P},props:{news:Object,arrayid:Number},computed:{search:{get:function(){return this.$store.state.search},set:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.$store.commit("setNewsUpdating",!0)}),250),this.$store.commit("updateSearch",t)}},getFormatedDate:function(){return q()(1e3*this.news.time).format("LL")},getFormatedDateSM:function(){return q()(1e3*this.news.time).format("l")},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},newfocus:function(){return this.$store.state.newsfocus}},methods:{AdminOptions:function(){this.adminopt=!this.adminopt},OpenNews:function(){""==this.$store.state.newsfocus&&this.$store.commit("updateNewsFocus",this.arrayid)},SetPinned:function(t){var e=this;this.$bvModal.msgBoxConfirm("Titre de l'actualité : ".concat(t.title),{title:0==t.pinned?"épingler cette actualité ? (si une autre actualité est épingler, celle ci prendra sa place)":"annuler l'épinglage ?",id:"newsmodal4",size:"md",buttonSize:"sm",okVariant:0==t.pinned?"success":"danger",okTitle:0==t.pinned?"Epingler":"Annuler l'épinglage",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&e.changePinned(t.id)}))},ChangeVisibility:function(t){var e=this;this.$bvModal.msgBoxConfirm("Changement de visibilité de cette actualité : ".concat(t.title),{title:0==t.visible?"cette actualité n'est pas encore publiée , voulez-vous la publier ?":"cette actualité est publiée , voulez-vous la cacher ?",id:"newsmodal3",size:"md",buttonSize:"sm",okVariant:0==t.visible?"success":"danger",okTitle:0==t.visible?"Publier":"Rendre invisible",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&(1==t.visible?e.changeVisNews(t.id,0):e.changeVisNews(t.id,1))}))},DeleteVerification:function(t){var e=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer cette actualité : ".concat(t.title),{title:"Cette action est irréversible",id:"menumodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&e.deleteNews(t.id)}))},changePinned:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/news/pin/".concat(t),n.next=4,l.a.post(Object(u["generateUrl"])(s),{id:t},{type:"application/json"});case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setNewsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},changeVisNews:function(t,e){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,a="apps/intranetagglo/news/pub/".concat(t),s.next=4,l.a.post(Object(u["generateUrl"])(a),{id:t,visible:e},{type:"application/json"});case 4:i=s.sent,n.LastModifiedID=i.data.id,s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](0),console.error(s.t0);case 11:n.$store.commit("setNewsUpdating",!0);case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},deleteNews:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/news/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(s,{id:t}));case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setNewsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},mounted:function(){var t=document.getElementById("news-textbox-block"+this.news.id);""==this.news.photos?t.setAttribute("noimg","true"):t.setAttribute("noimg","false")},data:function(){return{newscolor:"#00B2FF",focus:"",timer:void 0,adminopt:!1}}},H=G,F=(n("d900"),Object(b["a"])(H,M,I,!1,null,"055d0246",null)),J=F.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"apps"}},[n("div",{staticClass:"apps-container",attrs:{id:"apps-container"}},[n("h2",{staticClass:"apps-header"},[t._v(" Applications "),t.isAdmin?n("div",{attrs:{id:"apps-update-btn"}},[n("AppsUpdate")],1):t._e()]),t._l(t.apps,(function(e,s){return n("a",{key:s,staticClass:"apps-content-main",attrs:{href:e.link,target:"_blank"}},[n("b-icon",{staticClass:"apps-icon",attrs:{icon:e.icon}}),n("div",{staticClass:"apps-title"},[t._v(t._s(e.title))])],1)}))],2)])},Q=[],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-icon",{attrs:{icon:"pencil-square"},on:{click:function(e){t.appsmodal=!t.appsmodal}}}),n("b-modal",{staticStyle:{"justify-content":"center"},attrs:{id:"appmodal1",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification des raccourcis d'application :")]},proxy:!0}]),model:{value:t.appsmodal,callback:function(e){t.appsmodal=e},expression:"appsmodal"}},[n("b-table-simple",[n("b-thead",[n("b-tr",[n("b-th",[t._v("Titre")]),n("b-th",[t._v("Lien")]),n("b-th",[t._v("Icon")]),n("b-th",[t._v("groups")]),n("b-th"),n("b-th")],1)],1),n("b-tbody",t._l(t.UpdatedApps,(function(e,s){return n("b-tr",{key:s},[n("b-th",[t._v(t._s(e.title))]),n("b-td",[t._v(t._s(e.link))]),n("b-td",[t._v(t._s(e.icon))]),n("b-td",[t._v(t._s(e.groups))]),n("b-td",[n("button",{staticClass:"apps-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e,s)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1)]),n("b-td",[n("button",{staticClass:"apps-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e,s)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)])],1)})),1)],1),n("div",{staticStyle:{width:"100%",display:"flex"}},[n("button",{staticClass:"apps-add",on:{click:function(e){return t.Create()}}},[t._v("+")])])],1),n("b-modal",{attrs:{id:"appmodal2",size:"xl"},on:{ok:t.Save},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification de l'application :")]},proxy:!0}]),model:{value:t.updateapp,callback:function(e){t.updateapp=e},expression:"updateapp"}},[n("div",{staticClass:"menu-form"},[n("div",[n("label",{attrs:{for:"title"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"title",type:"text",required:""},model:{value:t.apptoupdate.title,callback:function(e){t.$set(t.apptoupdate,"title",e)},expression:"apptoupdate.title"}})],1),n("div",[n("label",{attrs:{for:"link"}},[t._v("Lien URL")]),n("b-form-input",{attrs:{name:"link",type:"text",required:""},model:{value:t.apptoupdate.link,callback:function(e){t.$set(t.apptoupdate,"link",e)},expression:"apptoupdate.link"}})],1),n("div",[n("label",{attrs:{for:"icon"}},[t._v("icon")]),n("b-form-input",{attrs:{name:"icon",type:"text",required:""},model:{value:t.apptoupdate.icon,callback:function(e){t.$set(t.apptoupdate,"icon",e)},expression:"apptoupdate.icon"}})],1),n("label",{attrs:{for:"groups"}},[t._v("Groupes")]),n("b-form-tags",{staticClass:"mb-2",attrs:{id:"tags-component-select",name:"groups",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.tags,a=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[s.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(s,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",a,!1),i))]}}]),model:{value:t.apptoupdate.groups,callback:function(e){t.$set(t.apptoupdate,"groups",e)},expression:"apptoupdate.groups"}})],1)])],1)},X=[],Y={name:"AppsUpdate",computed:{UpdatedApps:function(){return this.apps},availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.apptoupdate.groups.indexOf(e)}))}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/apps");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.apps=e.data}))},methods:{Save:function(){null==this.apptoupdate.id?(this.apptoupdate.groups=this.apptoupdate.groups.join(";"),this.apps.push(this.apptoupdate),this.createApps(this.apps[this.arrayindex])):(this.apptoupdate.groups=this.apptoupdate.groups.join(";"),this.apps[this.arrayindex].title=this.apptoupdate.title,this.apps[this.arrayindex].icon=this.apptoupdate.icon,this.apps[this.arrayindex].link=this.apptoupdate.link,this.apps[this.arrayindex].groups=this.apptoupdate.groups,this.updateApps(this.apps[this.arrayindex]))},DeleteVerification:function(t,e){var n=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer cette application : ".concat(t.title),{title:"Confirmation",id:"appmodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(s){s&&(n.apps.splice(e,1),n.deleteApps(t.id))}))},Create:function(){this.arrayindex=this.apps.length,this.apptoupdate.id=null,this.apptoupdate.title="",this.apptoupdate.link="",this.apptoupdate.icon="",this.apptoupdate.groups=[],this.updateapp=!this.updateapp},Modify:function(t,e){this.arrayindex=e,this.apptoupdate.id=t.id,this.apptoupdate.title=t.title,this.apptoupdate.link=t.link,this.apptoupdate.icon=t.icon,this.apptoupdate.groups=t.groups.split(";"),this.updateapp=!this.updateapp},createApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/apps",n.next=4,l.a.post(Object(u["generateUrl"])(s),t,{type:"application/json"});case 4:a=n.sent,e.LastModifiedID=a.data.id,e.apps.find((function(t){return null===t.id})).id=a.data.id,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error(n.t0);case 12:e.$store.commit("setAppsUpdating",!0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/apps/".concat(t.id),n.next=4,l.a.post(Object(u["generateUrl"])(s),t,{type:"application/json"});case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setAppsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},deleteApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s="apps/intranetagglo/apps/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(s,{id:t}));case 4:a=n.sent,e.LastModifiedID=a.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setAppsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},data:function(){return{LastModifiedID:null,appsmodal:!1,updateapp:!1,apps:[],arrayindex:null,apptoupdate:{id:null,title:"",link:"",icon:"",groups:[]}}}},Z=Y,tt=(n("70b8"),Object(b["a"])(Z,W,X,!1,null,"68d3a5d2",null)),et=tt.exports,nt={name:"Apps",components:{AppsUpdate:et},watch:{updating:function(t){var e=this;if(t){var n="apps/intranetagglo".concat("/apps");l.a.get(Object(u["generateUrl"])(n)).then((function(t){e.apps=t.data,e.$store.commit("setAppsUpdating",!1)}))}}},computed:{updating:function(){return this.$store.state.appsupdating},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},UserGroups:function(){return this.$store.state.usergroups},search:{get:function(){return this.$store.state.search},set:function(t){this.$store.commit("updateSearch",t)}}},methods:{AppsSet:function(t){this.droptext=t,this.$store.commit("updateCategories",t)}},mounted:function(){var t=this;l.a.get(Object(u["generateUrl"])("apps/intranetagglo".concat("/appsG"))).then((function(e){return t.apps=e.data}))},data:function(){return{droptext:"",modal:!1,apptoupdate:{},apps:[]}}},st=nt,at=Object(b["a"])(st,K,Q,!1,null,null,null),it=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-news-button",on:{click:function(e){t.modal=!t.modal}}},[t._v(" Ajouter une actualité "),n("b-modal",{ref:"modal",attrs:{id:"newsmodal1",size:"xl"},on:{ok:t.AddNews},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Ajouter une "),n("code",{staticStyle:{"font-size":"1.25rem"}},[t._v("Actualité")])]},proxy:!0},{key:"modal-footer",fn:function(e){var s=e.ok,a=e.cancel;return[n("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return a()}}},[t._v("Annuler")]),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(t){return s()}}},[t._v("Ajouter")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-table-simple",{attrs:{id:"news-table",small:"","caption-top":"",stacked:""}},[n("caption",[t._v("sont obligatoires : Titre, Le contenu de l'actualité")]),n("b-tbody",[n("b-tr",[n("b-th",[n("label",{attrs:{for:"titre"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"titre",required:""},model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),n("b-th",[n("label",{attrs:{for:"subtitle"}},[t._v("Sous-titre")]),n("b-form-input",{attrs:{name:"subtitle",required:""},model:{value:t.news.subtitle,callback:function(e){t.$set(t.news,"subtitle",e)},expression:"news.subtitle"}})],1),n("b-th",[n("label",{attrs:{for:"category"}},[t._v("Catégorie")]),n("b-form-input",{attrs:{name:"category",list:"category-id",required:""},model:{value:t.news.category,callback:function(e){t.$set(t.news,"category",e)},expression:"news.category"}}),n("datalist",{attrs:{id:"category-id"}},t._l(t.categoryoptions,(function(e,s){return n("option",{key:s},[t._v(t._s(e))])})),0)],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"groups-component-select"}},[t._v("Restrictions de Groupes d'utilisateurs")]),n("b-form-tags",{staticClass:"mb-2",attrs:{name:"groups-component-select",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.tags,a=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[s.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(s,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",a,!1),i))]}}]),model:{value:t.news.groups,callback:function(e){t.$set(t.news,"groups",e)},expression:"news.groups"}})],1)],1),n("b-tr",[n("b-th",{attrs:{colspan:"4"}},[n("label",{attrs:{for:"text"}},[t._v("Contenu de l'actualité")]),n("VueTrix",{attrs:{name:"text",inputId:"editor1",placeholder:"Contenu de l'actualité une fois étendue..."},model:{value:t.news.text,callback:function(e){t.$set(t.news,"text",e)},expression:"news.text"}})],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"photo"}},[t._v("Image d'illustration / Photo")]),n("b-form-file",{attrs:{name:"photo",size:"sm",accept:"image/*",placeholder:"Choisir le fichier (.jpg/.jpeg/.png)...","drop-placeholder":"Placer l'image ici ..."},model:{value:t.news.photo,callback:function(e){t.$set(t.news,"photo",e)},expression:"news.photo"}})],1)],1)],1),n("b-tfoot")],1)],1)])],1)},rt=[],ct={name:"NewsAdd",components:{VueTrix:z["a"]},computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.news.groups.indexOf(e)}))},shortdesccount:function(){return 190-this.shortdesc.length}},methods:{AddNews:function(){this.news.author=this.$store.state.username,this.news.groups=this.news.groups.join(";"),this.createNews(this.news),this.news={title:"",subtitle:"",text:"",photo:null,category:"",groups:[]}},createNews:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:try{s=new E.a,s.append("title",t.title),s.append("subtitle",t.subtitle),s.append("text",t.text),null!=t.photo&&s.append("photo",t.photo,t.photo.name),s.append("category",t.category),s.append("groups",t.groups),l.a.post(Object(u["generateUrl"])("apps/intranetagglo/news"),s,{headers:{accept:"application/json","Content-Type":"multipart/form-data; boundary=".concat(s._boundary)}})}catch(a){console.error(a)}e.$store.commit("setNewsUpdating",!0);case 2:case"end":return n.stop()}}),n)})))()},toggleModal:function(){this.$refs["modal"].toggle("#toggle-btn")},formatdesc:function(t){return t.substring(0,190)},addphotos:function(t){return t.push(null)},addpdf:function(t){return t.push(null)}},data:function(){return{modal:!1,news:{title:"",subtitle:"",text:"",photo:null,category:"",groups:[]},categoryoptions:[]}}},lt=ct,ut=Object(b["a"])(lt,ot,rt,!1,null,null,null),dt=ut.exports,pt={name:"News",props:{msg:String},components:{NewsComp:J,Apps:it,NewsAdd:dt},watch:{updating:function(t){var e=this;if(t){var n="apps/intranetagglo/";this.$store.state.usergroups.includes("admin")?n+="news/".concat(this.currentPage-1):n+="newsG/".concat(this.currentPage-1),l.a.post(Object(u["generateUrl"])(n),{id:3*(this.currentPage-1),search:this.search},{type:"application/json"}).then((function(t){e.news=t.data[0],e.rows=t.data[1],e.$store.commit("setNewsUpdating",!1)}))}}},data:function(){return{categorysearch:"",addNews:!1,AddNewsModal:!1,news:[],page:1,rows:0,focus:"",timer:void 0}},computed:{newfocus:function(){return console.log("focus change : "+this.$store.state.newsfocus),this.$store.state.newsfocus},updating:function(){return this.$store.state.newsupdating},getNews:function(){return this.news},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},search:{get:function(){return this.$store.state.search},set:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.$store.commit("setNewsUpdating",!0)}),250),this.$store.commit("updateSearch",t)}},currentPage:{get:function(){return this.page},set:function(t){this.page=t,this.$store.commit("setNewsUpdating",!0)}}},methods:{handleScroll:function(){var t=this,e=document.querySelectorAll(".news");setInterval((function(){}),1e3),e.forEach((function(e){var n=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;(n>=0||s<=0)&&(t.isActive=!1,e.classList.remove("active")),n<=300&&s>=0&&(t.isActive=!0,e.classList.add("active"))}))},closeNews:function(){this.$store.commit("updateNewsFocus",3)}},mounted:function(){var t=this;l.a.get(Object(u["generateUrl"])("apps/intranetagglo/user")).then((function(e){t.$store.commit("setUser",e.data);var n="apps/intranetagglo/";e.data[1].includes("admin")?(n+="news/0",t.$store.dispatch("getGroupsOptions"),t.$store.dispatch("getCategoryOptions","")):n+="newsG/0",l.a.post(Object(u["generateUrl"])(n),{id:0,search:""},{type:"application/json"}).then((function(e){t.news=e.data[0],t.rows=e.data[1],t.$store.commit("setNewsUpdating",!1)}))}))},destroyed:function(){var t=document.getElementById("news-container");t.removeEventListener("scroll",this.handleScroll)}},mt=pt,ft=(n("4630"),Object(b["a"])(mt,$,N,!1,null,"1b6c96cd",null)),gt=ft.exports,bt={name:"Home",components:{Navigation:_,Settings:S,News:gt},data:function(){return{darkmodestring:null,darkmode:null,patterns:"6",backgroundcolor:"2"}},watch:{darkmode:function(t){t?(localStorage.setItem("color_scheme","dark"),this.darkmodestring="dark",this.darkmode="dark"):(localStorage.setItem("color_scheme","light"),this.darkmodestring="")}},mounted:function(){document.getElementById("cog").addEventListener("click",(function(){document.getElementById("Settings").classList.toggle("hidden"),document.getElementById("apps-container").classList.toggle("hidden")}))},created:function(){var t=localStorage.getItem("color_scheme"),e=localStorage.getItem("patterns"),n=localStorage.getItem("variant");t&&("dark"===t?(this.darkmodestring="dark",this.darkmode=!0):this.darkmodestring=""),e&&(this.patterns=e),n&&(this.backgroundcolor=n)}},ht=bt,vt=Object(b["a"])(ht,a,i,!1,null,null,null),yt=vt.exports,wt=n("2f62");s["default"].use(wt["a"]);var kt=new wt["a"].Store({state:{search:"",username:"",usergroups:[],groupsoptions:[],categoryoptions:[],categoryfilter:"",appsupdating:!1,menuupdating:!1,newsupdating:!1,newsfocus:""},getters:{News_length:function(t){return t.News.length}},mutations:{updateNewsFocus:function(t,e){0==e&&(t.newsfocus="left"),1==e&&(t.newsfocus="center"),2==e&&(t.newsfocus="right"),3==e&&(t.newsfocus="")},updateSearch:function(t,e){t.search=e},updateCategories:function(t,e){t.categoryfilter=e},setUser:function(t,e){t.username=e[0],t.usergroups=e[1]},setGroupsOptions:function(t,e){t.groupsoptions=e},setCategoryOptions:function(t,e){console.log(e),t.categoryoptions=e},setAppsUpdating:function(t,e){t.appsupdating=e},setMenuUpdating:function(t,e){t.menuupdating=e},setNewsUpdating:function(t,e){t.newsupdating=e}},actions:{getCategoryOptions:function(t,e){var n=t.commit;l.a.get(Object(u["generateUrl"])("apps/intranetagglo/news/category"),{params:{search:e}}).then((function(t){n("setCategoryOptions",t)}))},getGroupsOptions:function(t){var e=t.commit;l.a.get(Object(u["generateUrl"])("apps/intranetagglo/api/groups"),{params:{search:""}}).then((function(t){e("setGroupsOptions",t.data)}))}},modules:{}}),_t=(n("ab8b"),n("2dd8"),n("5f5b")),jt=n("b1e0");n("eab5"),n("5341"),n("868e"),n("3e16");s["default"].use(_t["a"]),s["default"].use(jt["a"]),s["default"].config.productionTip=!1,new s["default"]({store:kt,render:function(t){return t(yt)}}).$mount("#app")},"70b8":function(t,e,n){"use strict";n("1790")},"868e":function(t,e,n){},8749:function(t,e,n){},a234:function(t,e,n){"use strict";n("bf54")},bf54:function(t,e,n){},d900:function(t,e,n){"use strict";n("3423")},eab5:function(t,e,n){}});
//# sourceMappingURL=intranetagglo34.js.map