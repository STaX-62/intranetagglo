(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0376":function(t,e,n){},"3e16":function(t,e,n){},4313:function(t,e,n){"use strict";n("6fa2")},"4d81":function(t,e,n){"use strict";n("5084")},5084:function(t,e,n){},5341:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"Home",class:t.darkmodestring,attrs:{id:"Home",pattern:t.patterns,variant:t.backgroundcolor}},[n("div",{staticClass:"settings-box"},[n("b-icon",{staticClass:"cog",attrs:{id:"cog",name:"cog",icon:"gear"}}),n("label",{staticStyle:{position:"absolute"},attrs:{for:"cog"}},[t._v("Paramètres")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.darkmode,expression:"darkmode"}],staticClass:"checkbox",attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.darkmode)?t._i(t.darkmode,null)>-1:t.darkmode},on:{change:function(e){var n=t.darkmode,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);a.checked?o<0&&(t.darkmode=n.concat([i])):o>-1&&(t.darkmode=n.slice(0,o).concat(n.slice(o+1)))}else t.darkmode=s}}}),n("label",{staticClass:"label",attrs:{for:"checkbox"}},[n("b-icon",{staticStyle:{color:"#f1c40f"},attrs:{icon:"moon"}}),n("b-icon",{staticStyle:{color:"#f39c12"},attrs:{icon:"sun"}}),n("div",{staticClass:"ball"})],1)],1),n("Settings",{staticClass:"Settings hidden",attrs:{id:"Settings"}}),n("Navigation",{staticClass:"Navbar"}),n("News")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidenav"},[n("div",{staticClass:"sidenav-logo"},[n("img",{attrs:{src:t.image}})]),n("div",{staticClass:"sidenav-menu"},t._l(t.sectionArray,(function(e,a){return n("div",{key:"B"+a,staticClass:"section-block"},[n("button",{staticClass:"section"},[n("div",{staticClass:"section-icon"},[n("b-icon",{attrs:{icon:e.icon}})],1),n("div",{staticClass:"section-title"},[t._v(t._s(e.title))])]),t._l(t.menusArray[a],(function(e,s){return n("div",{key:"B"+s,staticClass:"menu",attrs:{id:"menu-"+a+"-"+s},on:{click:function(e){return t.ExtendSubMenu(a,s)}}},[n("div",{staticClass:"submenu-title"},[t.isEmpty(t.submenusArray[a][s])?n("div",{staticClass:"caret"},[t._v("▷")]):t._e(),t._v(" "+t._s(e.title)+" ")]),n("div",{staticClass:"menu-container",attrs:{id:"container-"+a+"-"+s}},t._l(t.submenusArray[a][s],(function(e,a){return n("a",{key:"B"+a,staticClass:"nav-link text-truncate",attrs:{href:e.link}},[n("span",{staticClass:"d-sm-inline"},[t._v(t._s(e.title))])])})),0)])}))],2)})),0),n("div",{staticClass:"Raccourcis"},[t.isAdmin?n("MenuUpdate"):t._e(),n("a",{staticClass:"Files",attrs:{href:"https://cloud.ca2bm.fr/index.php/f/1183804"}},[n("b-icon",{staticClass:"doc-icon",attrs:{icon:"folder"}}),n("div",[t._v("Documents")])],1)],1)])},r=[],c=(n("caad"),n("2532"),n("f7b4")),l=n.n(c),u=n("6ca4"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"admin-settings",on:{click:function(e){t.global=!t.global}}},[n("b-icon",{staticClass:"doc-icon",attrs:{icon:"gear"}}),n("div",[t._v("Modifier le menu")])],1),n("b-modal",{ref:"modal",attrs:{id:"menumodal1",size:"xl"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification du Menu de navigation")]},proxy:!0}]),model:{value:t.global,callback:function(e){t.global=e},expression:"global"}},[n("div",{staticStyle:{display:"block",position:"relative",height:"fit-content"}},[n("div",{staticClass:"menu-table"},[n("div",{staticClass:"table-header"},[t._v("Section")]),n("div",{staticClass:"table-header"},[t._v("Menu")]),n("div",{staticClass:"table-header"},[t._v("Sous-Menu")]),n("div",{staticClass:"table-content"},[t._l(t.sectionArray,(function(e,a){return n("div",{key:a,staticClass:"table-section"},[n("div",{staticClass:"table-block",attrs:{position:a+"-0-0",type:"text"}},[t._v(" "+t._s(e.title)+" "),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)]),n("div",[t._l(t.menusArray[a],(function(e,s){return n("div",{key:s,staticClass:"table-menu"},[n("div",{staticClass:"table-block",attrs:{position:a+"-"+(s+1)+"-0",type:"text"}},[n("div",[t._v(t._s(e.title))]),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)]),n("div",{staticClass:"table-submenu"},[t._l(t.submenusArray[a][s],(function(e,i){return n("div",{key:i,staticClass:"table-submenu-content"},[n("div",{staticClass:"table-block",attrs:{position:a+"-"+(s+1)+"-"+(i+1),type:"text"}},[n("div",[t._v(t._s(e.title))]),n("button",{staticClass:"menu-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("button",{staticClass:"menu-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)])])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(100% - 10px)"},on:{click:function(e){return t.AddSubmenu(t.submenusArray[a][s],a,s)}}},[t._v("+")])],2)])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(50% - 10px)"},on:{click:function(e){return t.AddMenu(t.menusArray[a],a)}}},[t._v("+")])],2)])})),n("button",{staticClass:"menu-add",staticStyle:{width:"calc(33% - 10px)"},on:{click:function(e){return t.AddSection(t.sectionArray)}}},[t._v("+")])],2)])])]),n("b-modal",{ref:"modal",attrs:{id:"menumodal2",size:"xl"},on:{ok:t.Save},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification du Menu de navigation")]},proxy:!0}]),model:{value:t.detailed,callback:function(e){t.detailed=e},expression:"detailed"}},[n("div",{staticClass:"menu-form"},[n("div",[n("label",{attrs:{for:"title"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"title",type:"text"},model:{value:t.modifying.title,callback:function(e){t.$set(t.modifying,"title",e)},expression:"modifying.title"}})],1),1!=t.modifying.haschild?n("div",[n("label",{attrs:{for:"link"}},[t._v("Lien URL")]),n("b-form-input",{attrs:{name:"link",type:"text"},model:{value:t.modifying.link,callback:function(e){t.$set(t.modifying,"link",e)},expression:"modifying.link"}})],1):t._e(),null!=t.modifying.icon?n("div",[n("label",{attrs:{for:"icon"}},[t._v("icon (only Section)")]),n("b-form-input",{attrs:{name:"icon",type:"text"},model:{value:t.modifying.icon,callback:function(e){t.$set(t.modifying,"icon",e)},expression:"modifying.icon"}})],1):t._e(),n("label",{attrs:{for:"groups"}},[t._v("Groupes")]),n("b-form-tags",{staticClass:"mb-2",attrs:{id:"tags-component-select",name:"groups",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.tags,s=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[a.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(a,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",s,!1),i))]}}]),model:{value:t.modifying.groups,callback:function(e){t.$set(t.modifying,"groups",e)},expression:"modifying.groups"}})],1)])],1)},p=[],m=n("1da1"),f=(n("96cf"),n("4de4"),n("c740"),n("a434"),n("9911"),n("ac1f"),n("1276"),n("7db0"),n("a15b"),{name:"NewsUpdate",computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.modifying.groups.indexOf(e)}))},sectionArray:function(){for(var t=this.menusInBDD,e=[],n=0;n<t.length;n++)for(var a=0;a<t.length;a++)t[n].position==a+"-0-0"&&e.push(t[n]);return e},menusArray:function(){for(var t=this.menusInBDD,e=[],n=[],a=0;a<this.sectionArray.length;a++){for(var s=0;s<t.length;s++)for(var i=0;i<t.length;i++)t[s].position==a+"-"+(i+1)+"-0"&&n.push(t[s]);e.push(n),n=[]}return e},submenusArray:function(){for(var t=this.menusInBDD,e=[],n=[],a=[],s=0;s<this.sectionArray.length;s++){for(var i=0;i<this.menusArray[s].length;i++){for(var o=0;o<t.length;o++)for(var r=0;r<t.length;r++)t[o].position==s+"-"+(i+1)+"-"+(r+1)&&a.push(t[o]);n.push(a),a=[]}e.push(n),n=[]}return e}},methods:{DeleteVerification:function(t){var e=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer ce menu : ".concat(t.title),{title:"Confirmation",id:"menumodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){if(n){var a=e.menusInBDD.findIndex((function(e){return e.title===t.title}));"Nouvelle Section"==t.title||"Nouveau Menu"==t.title||"Nouveau Sous-Menu"==t.title?e.apps.splice(a,1):(e.apps.splice(a,1),e.deleteMenu(t.id))}})).catch((function(t){}))},Modify:function(t){this.modifying.selected=t.position,this.modifying.title=t.title,this.modifying.link=t.link,this.modifying.icon=null,this.modifying.groups=t.groups.split(";");var e=t.position.split("-");0==e[1]?(this.modifying.icon=t.icon,0==this.menusArray[0].length?this.modifying.haschild=!1:this.modifying.haschild=!0):0==e[2]?0==this.submenusArray[e[0]][e[1]-1].length?this.modifying.haschild=!1:this.modifying.haschild=!0:this.modifying.haschild=!1,this.detailed=!this.detailed},Save:function(){var t=this,e=this.menusInBDD.find((function(e){return e.position===t.modifying.selected}));"Nouvelle Section"==e.title||"Nouveau Menu"==e.title||"Nouveau Sous-Menu"==e.title?(e.title=this.modifying.title,null!=this.modifying.link?e.link=this.modifying.link:e.link="",null!=this.modifying.icon?e.icon=this.modifying.icon:e.icon="",e.groups=this.modifying.groups.join(";"),this.createMenu(e)):(e.title=this.modifying.title,null!=this.modifying.link?e.link=this.modifying.link:e.link="",null!=this.modifying.icon?e.icon=this.modifying.icon:e.icon="",e.groups=this.modifying.groups.join(";"),this.updateMenu(e))},AddSubmenu:function(t,e,n){this.menusInBDD.push({title:"Nouveau Sous-Menu",icon:"",link:"",groups:"",position:e+"-"+(n+1)+"-"+(t.length+1)})},AddMenu:function(t,e){this.menusInBDD.push({title:"Nouveau Menu",icon:"",link:"",groups:"",position:e+"-"+(t.length+1)+"-0"})},AddSection:function(t){this.menusInBDD.push({title:"Nouvelle Section",icon:"exclamation-triangle",link:"",groups:"",position:t.length+"-0-0"})},createMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/menus",n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,e.menusInBDD.find((function(t){return t.position===e.modifying.selected})).id=s.data.id,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error(n.t0);case 12:e.$store.commit("setMenuUpdating",!0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/menus/".concat(t.id),n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setMenuUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},deleteMenu:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/menus/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(a,{id:t}));case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setMenuUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},data:function(){return{global:!1,detailed:!1,updating:!1,menusInBDD:[],modifying:{selected:null,title:"",link:"",icon:"",groups:"",haschild:!1},LastModifiedID:null}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/menus");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.menusInBDD=e.data}))}}),g=f,h=(n("a234"),n("2877")),b=Object(h["a"])(g,d,p,!1,null,"7045c2c8",null),v=b.exports,y={name:"Navigation",components:{MenuUpdate:v},data:function(){return{image:"/nextcloud/apps/intranetca/src/assets/LogoCA2BM.png",user:[],lastOpenedContainer:null,menusInBDD:[]}},watch:{updating:function(t){var e=this;t&&l.a.get(Object(u["generateUrl"])("apps/intranetagglo".concat("/menusG"))).then((function(t){e.menusInBDD=t.data,e.$store.commit("setMenuUpdating",!1)}))}},computed:{updating:function(){return this.$store.state.menuupdating},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},sectionArray:function(){for(var t=this.menusInBDD,e=[],n=0;n<t.length;n++)for(var a=0;a<t.length;a++)t[n].position==a+"-0-0"&&e.push(t[n]);return e},menusArray:function(){for(var t=this.menusInBDD,e=[],n=[],a=0;a<this.sectionArray.length;a++){for(var s=0;s<t.length;s++)for(var i=0;i<t.length;i++)t[s].position==a+"-"+(i+1)+"-0"&&n.push(t[s]);e.push(n),n=[]}return e},submenusArray:function(){for(var t=this.menusInBDD,e=[],n=[],a=[],s=0;s<this.sectionArray.length;s++){for(var i=0;i<this.menusArray[s].length;i++){for(var o=0;o<t.length;o++)for(var r=0;r<t.length;r++)t[o].position==s+"-"+(i+1)+"-"+(r+1)&&a.push(t[o]);n.push(a),a=[]}e.push(n),n=[]}return e}},methods:{isEmpty:function(t){return t.length>0},CategorySet:function(t){this.droptext=t,this.$store.commit("updateCategories",t)},ExtendSubMenu:function(t,e){null!=this.lastOpenedContainer&&this.lastOpenedContainer!=t+"-"+e&&(document.getElementById("menu-"+this.lastOpenedContainer).firstChild.classList.toggle("active"),document.getElementById("container-"+this.lastOpenedContainer).classList.toggle("active")),document.getElementById("menu-"+t+"-"+e).firstChild.classList.toggle("active"),document.getElementById("container-"+t+"-"+e).classList.toggle("active"),this.lastOpenedContainer==t+"-"+e?this.lastOpenedContainer=null:this.lastOpenedContainer=t+"-"+e}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/menusG");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.menusInBDD=e.data}))}},k=y,w=(n("4d81"),Object(h["a"])(k,o,r,!1,null,"759d5160",null)),_=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"settings-wrapper"},[n("h2",{staticClass:"settings-title"},[t._v("Paramètres")]),n("b-icon",{staticClass:"settings-close",attrs:{id:"close",icon:"x-circle-fill"}}),t._m(0)],1)])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-block"},[n("h5",{staticClass:"settings-label"},[t._v("motifs du fond")]),n("select",{staticClass:"settings-pattern-select",attrs:{id:"pattern-select"}},[n("option",{attrs:{value:"1"}},[t._v("modele 1")]),n("option",{attrs:{value:"2"}},[t._v("modele 2")]),n("option",{attrs:{value:"3"}},[t._v("modele 3")]),n("option",{attrs:{value:"4"}},[t._v("modele 4")]),n("option",{attrs:{value:"5"}},[t._v("modele 5")]),n("option",{attrs:{value:"6"}},[t._v("modele 6")]),n("option",{attrs:{value:"7"}},[t._v("modele 7")])]),n("h5",{staticClass:"settings-label"},[t._v("couleur du fond")]),n("select",{staticClass:"settings-pattern-select",attrs:{id:"variant-select"}},[n("option",{attrs:{value:"1"}},[t._v("variante 1")]),n("option",{attrs:{value:"2"}},[t._v("variante 2")])])])}],A={name:"Settings",data:function(){return{patterns:"2",backgroundcolor:"2"}},mounted:function(){var t=document.getElementById("pattern-select"),e=document.getElementById("variant-select");function n(){document.getElementById("Settings").classList.toggle("hidden"),document.getElementById("apps-container").classList.toggle("hidden")}function a(t){var e=document.createAttribute("pattern");e.value=t.target.value,localStorage.setItem("patterns",t.target.value),document.getElementById("Home").attributes.setNamedItem(e)}function s(t){var e=document.createAttribute("variant");e.value=t.target.value,localStorage.setItem("variant",t.target.value),document.getElementById("Home").attributes.setNamedItem(e)}t.children[parseInt(this.patterns)-1].setAttribute("selected","selected"),e.children[parseInt(this.backgroundcolor)-1].setAttribute("selected","selected"),document.getElementById("close").addEventListener("click",n),document.getElementById("pattern-select").addEventListener("change",a),document.getElementById("variant-select").addEventListener("change",s)},created:function(){var t=localStorage.getItem("patterns"),e=localStorage.getItem("variant");t&&(this.patterns=t),e&&(this.backgroundcolor=e)}},O=A,S=Object(h["a"])(O,x,C,!1,null,null,null),$=S.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"news-frame"}},[n("div",{staticClass:"news-container",attrs:{id:"news-container"}},[n("div",{class:t.isAdmin?"news-header admin-view":"news-header"},[n("h2",{staticClass:"news-header-title"},[t._v("Actualités")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"searchbar",attrs:{type:"text",placeholder:"Rechercher.."},domProps:{value:t.search},on:{keyup:function(e){return t.textSearch()},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.isAdmin?n("NewsAdd"):t._e()],1),n("div",{staticClass:"news-row",attrs:{id:"news-row",focus:t.focus}},[t._l(t.getNews,(function(e,a){return n("NewsComp",{key:a,attrs:{id:"news"+a,arrayid:a,focus:t.focus,news:t.news[a]},on:{"update:focus":function(e){t.focus=e}}})})),""!=t.focus?n("b-icon",{staticClass:"news-return",attrs:{icon:"arrow-return-left"},on:{click:function(e){return t.closeNews()}}}):t._e()],2),n("b-pagination",{staticClass:"news-pagination",attrs:{pills:"","total-rows":t.rows,"per-page":3},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),n("Apps",{staticClass:"Apps"})],1)},I=[],M=(n("841c"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news news-customcolor",style:"--news-color: "+t.newscolor,on:{click:t.OpenNews}},[n("div",{staticClass:"news-textbox"},[n("div",{staticClass:"news-textbox-block",attrs:{id:"news-textbox-block"+t.news.id}},[n("div",{staticClass:"news-title"},[t._v(t._s(t.news.title))]),n("div",{staticClass:"news-subtitle",class:{active:t.isActive}},[t._v(t._s(t.news.description))]),n("div",{staticClass:"news-bar"}),n("div",{staticClass:"news-description",domProps:{innerHTML:t._s(t.news.text)}})]),n("div",{staticClass:"news-img-container"},[t.news.photos?n("img",{staticClass:"news-img",attrs:{src:t.news.photos}}):t._e()]),n("div",{staticClass:"news-tagbox"},[n("span",{staticClass:"news-tag"},[t._v(t._s(t.news.category))]),t.isAdmin?n("button",{staticClass:"news-visibility-button",attrs:{type:"button"},on:{click:function(e){return t.ChangeVisibility(t.news)}}},[1==t.news.visible?n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"eye"}}):n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"dark",icon:"eye-slash"}})],1):t._e(),t.isAdmin?n("NewsUpdate",{attrs:{autocomplete:t.news}}):t._e(),t.isAdmin?n("button",{staticClass:"news-del-button",attrs:{type:"button"},on:{click:function(e){return t.DeleteVerification(t.news)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1):t._e()],1)])])}),N=[],D=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"news-update-button",attrs:{type:"button"},on:{click:function(e){t.modal=!t.modal}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1),n("b-modal",{ref:"modal",attrs:{id:"newsmodal1",size:"xl"},on:{ok:t.UpdNews},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Ajouter une "),n("code",{staticStyle:{"font-size":"1.25rem"}},[t._v("Actualité")])]},proxy:!0},{key:"modal-footer",fn:function(e){var a=e.ok,s=e.cancel;return[n("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return s()}}},[t._v("Annuler")]),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(t){return a()}}},[t._v("Modifier")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-table-simple",{attrs:{id:"news-table",small:"","caption-top":"",stacked:""}},[n("caption",[t._v("sont obligatoires : Titre, Le contenu de l'actualité")]),n("b-tbody",[n("b-tr",[n("b-th",[n("label",{attrs:{for:"titre"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"titre",required:""},model:{value:t.autocomplete.title,callback:function(e){t.$set(t.autocomplete,"title",e)},expression:"autocomplete.title"}})],1),n("b-th",[n("label",{attrs:{for:"subtitle"}},[t._v("Sous-titre")]),n("b-form-input",{attrs:{name:"subtitle",required:""},model:{value:t.autocomplete.subtite,callback:function(e){t.$set(t.autocomplete,"subtite",e)},expression:"autocomplete.subtite"}})],1),n("b-th",[n("label",{attrs:{for:"category"}},[t._v("Catégorie")]),n("b-form-input",{attrs:{name:"catecogry",list:"categoryoptions"},model:{value:t.autocomplete.category,callback:function(e){t.$set(t.autocomplete,"category",e)},expression:"autocomplete.category"}}),n("datalist",{attrs:{id:"categoryoptions"}},[n("option",[t._v("Manual Option")]),t._l(t.categoryoptions,(function(e,a){return n("option",{key:a},[t._v(t._s(e))])}))],2)],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"groups-component-select"}},[t._v("Restrictions de Groupes d'utilisateurs")]),n("b-form-tags",{staticClass:"mb-2",attrs:{name:"groups-component-select",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.tags,s=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[a.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(a,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",s,!1),i))]}}]),model:{value:t.autocomplete.groups,callback:function(e){t.$set(t.autocomplete,"groups",e)},expression:"autocomplete.groups"}})],1)],1),n("b-tr",[n("b-th",{attrs:{colspan:"4"}},[n("label",{attrs:{for:"text"}},[t._v("Contenu de l'actualité")]),n("VueTrix",{attrs:{name:"text",inputId:"editor1",placeholder:"Contenu de l'actualité une fois étendue..."},model:{value:t.autocomplete.text,callback:function(e){t.$set(t.autocomplete,"text",e)},expression:"autocomplete.text"}})],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"photo"}},[t._v("Image d'illustration / Photo")]),n("b-form-file",{attrs:{name:"photo",size:"sm",accept:"image/*",placeholder:"Choisir le fichier (.jpg/.jpeg/.png)...","drop-placeholder":"Placer l'image ici ..."},model:{value:t.autocomplete.photo,callback:function(e){t.$set(t.autocomplete,"photo",e)},expression:"autocomplete.photo"}})],1)],1)],1),n("b-tfoot")],1)],1)])],1)}),U=[],B=n("ff0b"),E={name:"NewsAdd",components:{VueTrix:B["a"]},props:{autocomplete:Array},computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.autocomplete.groups.indexOf(e)}))},shortdesccount:function(){return 190-this.shortdesc.length},categoryoptions:function(){this.$store.state.categoryoptions}},methods:{UpdNews:function(){this.autocomplete.author=this.$store.state.username,this.autocomplete.groups=this.autocomplete.groups.join(";"),console.log(this.autocomplete),this.updateNews(this.autocomplete)},updateNews:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/news/update/".concat(t.id),n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setNewsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},toggleModal:function(){this.$refs["modal"].toggle("#toggle-btn")},formatdesc:function(t){return t.substring(0,190)},addphotos:function(t){return t.push(null)},addpdf:function(t){return t.push(null)}},mounted:function(){},data:function(){return{modal:!1,newcategory:"",categoryoptions:[],test:""}}},L=E,R=Object(h["a"])(L,D,U,!1,null,null,null),T=R.exports,z={name:"NewsComp",components:{NewsUpdate:T},props:{news:Object,arrayid:Number,focus:String},computed:{isAdmin:function(){return this.$store.state.usergroups.includes("admin")}},methods:{OpenNews:function(){1==this.arrayid&&(this.focus="left"),2==this.arrayid&&(this.focus="center"),3==this.arrayid&&(this.focus="right"),console.log(this.focus)},ChangeVisibility:function(t){var e=this;this.$bvModal.msgBoxConfirm("Changement de visibilité de cette actualité : ".concat(t.title),{title:0==t.visible?"cette actualité n'est pas encore publiée , voulez-vous la publier ?":"cette actualité est publiée , voulez-vous la cacher ?",id:"newsmodal3",size:"md",buttonSize:"sm",okVariant:0==t.visible?"success":"danger",okTitle:0==t.visible?"Publier":"Rendre invisible",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&(1==t.visible?e.changeVisNews(t.id,0):e.changeVisNews(t.id,1))}))},DeleteVerification:function(t){var e=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer cette actualité : ".concat(t.title),{title:"Cette action est irréversible",id:"menumodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(n){n&&e.deleteNews(t.id)}))},changeVisNews:function(t,e){var n=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,s="apps/intranetagglo/news/pub/".concat(t),a.next=4,l.a.post(Object(u["generateUrl"])(s),{id:t,visible:e},{type:"application/json"});case 4:i=a.sent,n.LastModifiedID=i.data.id,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.error(a.t0);case 11:n.$store.commit("setNewsUpdating",!0);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},deleteNews:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/news/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(a,{id:t}));case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setNewsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},mounted:function(){console.log(this.news);var t=document.getElementById("news-textbox-block"+this.news.id);""==this.news.photos?t.setAttribute("noimg","true"):t.setAttribute("noimg","false")},data:function(){return{newscolor:"#00B2FF"}}},P=z,V=(n("4313"),Object(h["a"])(P,M,N,!1,null,"440aae64",null)),q=V.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"apps"}},[n("div",{staticClass:"apps-container",attrs:{id:"apps-container"}},[n("h2",{staticClass:"apps-header"},[t._v(" Applications "),t.isAdmin?n("div",{attrs:{id:"apps-update-btn"}},[n("AppsUpdate")],1):t._e()]),t._l(t.apps,(function(e,a){return n("a",{key:a,staticClass:"apps-content-main",attrs:{href:e.link,target:"_blank"}},[n("b-icon",{staticClass:"apps-icon",attrs:{icon:e.icon}}),n("div",{staticClass:"apps-title"},[t._v(t._s(e.title))])],1)}))],2)])},H=[],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-icon",{attrs:{icon:"pencil-square"},on:{click:function(e){t.appsmodal=!t.appsmodal}}}),n("b-modal",{staticStyle:{"justify-content":"center"},attrs:{id:"appmodal1",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification des raccourcis d'application :")]},proxy:!0}]),model:{value:t.appsmodal,callback:function(e){t.appsmodal=e},expression:"appsmodal"}},[n("b-table-simple",[n("b-thead",[n("b-tr",[n("b-th",[t._v("Titre")]),n("b-th",[t._v("Lien")]),n("b-th",[t._v("Icon")]),n("b-th",[t._v("groups")]),n("b-th"),n("b-th")],1)],1),n("b-tbody",t._l(t.UpdatedApps,(function(e,a){return n("b-tr",{key:a},[n("b-th",[t._v(t._s(e.title))]),n("b-td",[t._v(t._s(e.link))]),n("b-td",[t._v(t._s(e.icon))]),n("b-td",[t._v(t._s(e.groups))]),n("b-td",[n("button",{staticClass:"apps-update-button",attrs:{type:"button"},on:{click:function(n){return t.Modify(e,a)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"info",icon:"pencil-square"}})],1)]),n("b-td",[n("button",{staticClass:"apps-del-button",attrs:{type:"button"},on:{click:function(n){return t.DeleteVerification(e,a)}}},[n("b-icon",{staticClass:"sidebar-item-icon",attrs:{variant:"danger",icon:"trash"}})],1)])],1)})),1)],1),n("div",{staticStyle:{width:"100%",display:"flex"}},[n("button",{staticClass:"apps-add",on:{click:function(e){return t.Create()}}},[t._v("+")])])],1),n("b-modal",{attrs:{id:"appmodal2",size:"xl"},on:{ok:t.Save},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Modification de l'application :")]},proxy:!0}]),model:{value:t.updateapp,callback:function(e){t.updateapp=e},expression:"updateapp"}},[n("div",{staticClass:"menu-form"},[n("div",[n("label",{attrs:{for:"title"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"title",type:"text",required:""},model:{value:t.apptoupdate.title,callback:function(e){t.$set(t.apptoupdate,"title",e)},expression:"apptoupdate.title"}})],1),n("div",[n("label",{attrs:{for:"link"}},[t._v("Lien URL")]),n("b-form-input",{attrs:{name:"link",type:"text",required:""},model:{value:t.apptoupdate.link,callback:function(e){t.$set(t.apptoupdate,"link",e)},expression:"apptoupdate.link"}})],1),n("div",[n("label",{attrs:{for:"icon"}},[t._v("icon")]),n("b-form-input",{attrs:{name:"icon",type:"text",required:""},model:{value:t.apptoupdate.icon,callback:function(e){t.$set(t.apptoupdate,"icon",e)},expression:"apptoupdate.icon"}})],1),n("label",{attrs:{for:"groups"}},[t._v("Groupes")]),n("b-form-tags",{staticClass:"mb-2",attrs:{id:"tags-component-select",name:"groups",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.tags,s=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[a.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(a,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",s,!1),i))]}}]),model:{value:t.apptoupdate.groups,callback:function(e){t.$set(t.apptoupdate,"groups",e)},expression:"apptoupdate.groups"}})],1)])],1)},J=[],K={name:"AppsUpdate",computed:{UpdatedApps:function(){return this.apps},availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.apptoupdate.groups.indexOf(e)}))}},mounted:function(){var t=this,e="apps/intranetagglo".concat("/apps");l.a.get(Object(u["generateUrl"])(e)).then((function(e){return t.apps=e.data}))},methods:{Save:function(){null==this.apptoupdate.id?(this.apptoupdate.groups=this.apptoupdate.groups.join(";"),this.apps.push(this.apptoupdate),this.createApps(this.apps[this.arrayindex]),console.log(this.apps)):(this.apptoupdate.groups=this.apptoupdate.groups.join(";"),this.apps[this.arrayindex].title=this.apptoupdate.title,this.apps[this.arrayindex].icon=this.apptoupdate.icon,this.apps[this.arrayindex].link=this.apptoupdate.link,this.apps[this.arrayindex].groups=this.apptoupdate.groups,this.updateApps(this.apps[this.arrayindex]))},DeleteVerification:function(t,e){var n=this;this.$bvModal.msgBoxConfirm("Êtes-vous sûr de vouloir supprimer cette application : ".concat(t.title),{title:"Confirmation",id:"appmodal3",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Supprimer",cancelTitle:"Retour",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(a){a&&(n.apps.splice(e,1),console.log(t.id),n.deleteApps(t.id))}))},Create:function(){this.arrayindex=this.apps.length,this.apptoupdate.id=null,this.apptoupdate.title="",this.apptoupdate.link="",this.apptoupdate.icon="",this.apptoupdate.groups=[],this.updateapp=!this.updateapp},Modify:function(t,e){this.arrayindex=e,this.apptoupdate.id=t.id,this.apptoupdate.title=t.title,this.apptoupdate.link=t.link,this.apptoupdate.icon=t.icon,this.apptoupdate.groups=t.groups.split(";"),this.updateapp=!this.updateapp},createApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/apps",n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,e.apps.find((function(t){return null===t.id})).id=s.data.id,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error(n.t0);case 12:e.$store.commit("setAppsUpdating",!0);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},updateApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/apps/".concat(t.id),n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setAppsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},deleteApps:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/apps/".concat(t),n.next=4,l.a.delete(Object(u["generateUrl"])(a,{id:t}));case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setAppsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}},data:function(){return{LastModifiedID:null,appsmodal:!1,updateapp:!1,apps:[],arrayindex:null,apptoupdate:{id:null,title:"",link:"",icon:"",groups:[]}}}},Q=K,W=(n("ea6c"),Object(h["a"])(Q,F,J,!1,null,"dc19fa92",null)),X=W.exports,Y={name:"Apps",components:{AppsUpdate:X},watch:{updating:function(t){var e=this;if(t){var n="apps/intranetagglo".concat("/apps");l.a.get(Object(u["generateUrl"])(n)).then((function(t){e.apps=t.data,e.$store.commit("setAppsUpdating",!1)}))}}},computed:{updating:function(){return this.$store.state.appsupdating},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},UserGroups:function(){return this.$store.state.usergroups},search:{get:function(){return this.$store.state.search},set:function(t){this.$store.commit("updateSearch",t)}}},methods:{AppsSet:function(t){this.droptext=t,this.$store.commit("updateCategories",t)}},mounted:function(){var t=this;l.a.get(Object(u["generateUrl"])("apps/intranetagglo".concat("/appsG"))).then((function(e){return t.apps=e.data}))},data:function(){return{droptext:"",modal:!1,apptoupdate:{},apps:[]}}},Z=Y,tt=Object(h["a"])(Z,G,H,!1,null,null,null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-news-button",on:{click:function(e){t.modal=!t.modal}}},[t._v(" Ajouter une actualité "),n("b-modal",{ref:"modal",attrs:{id:"newsmodal1",size:"xl"},on:{ok:t.AddNews},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Ajouter une "),n("code",{staticStyle:{"font-size":"1.25rem"}},[t._v("Actualité")])]},proxy:!0},{key:"modal-footer",fn:function(e){var a=e.ok,s=e.cancel;return[n("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return s()}}},[t._v("Annuler")]),n("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(t){return a()}}},[t._v("Ajouter")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-table-simple",{attrs:{id:"news-table",small:"","caption-top":"",stacked:""}},[n("caption",[t._v("sont obligatoires : Titre, Le contenu de l'actualité")]),n("b-tbody",[n("b-tr",[n("b-th",[n("label",{attrs:{for:"titre"}},[t._v("Titre")]),n("b-form-input",{attrs:{name:"titre",required:""},model:{value:t.news.title,callback:function(e){t.$set(t.news,"title",e)},expression:"news.title"}})],1),n("b-th",[n("label",{attrs:{for:"subtitle"}},[t._v("Sous-titre")]),n("b-form-input",{attrs:{name:"subtitle",required:""},model:{value:t.news.subtite,callback:function(e){t.$set(t.news,"subtite",e)},expression:"news.subtite"}})],1),n("b-th",[n("label",{attrs:{for:"category"}},[t._v("Catégorie")]),n("b-form-select",{attrs:{name:"category",options:t.categoryoptions,required:""},model:{value:t.news.category,callback:function(e){t.$set(t.news,"category",e)},expression:"news.category"}})],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"groups-component-select"}},[t._v("Restrictions de Groupes d'utilisateurs")]),n("b-form-tags",{staticClass:"mb-2",attrs:{name:"groups-component-select",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.tags,s=e.inputAttrs,i=e.inputHandlers,o=e.disabled,r=e.removeTag;return[a.length>0?n("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(a,(function(e){return n("li",{key:e,staticClass:"list-inline-item"},[n("b-form-tag",{attrs:{title:e,disabled:o,variant:"info"},on:{remove:function(t){return r(e)}}},[t._v(t._s(e))])],1)})),0):t._e(),n("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.availableOptions.length,options:t.availableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[n("option",{attrs:{disabled:"",value:""}},[t._v("Choose a tag...")])]},proxy:!0}],null,!0)},"b-form-select",s,!1),i))]}}]),model:{value:t.news.groups,callback:function(e){t.$set(t.news,"groups",e)},expression:"news.groups"}})],1)],1),n("b-tr",[n("b-th",{attrs:{colspan:"4"}},[n("label",{attrs:{for:"text"}},[t._v("Contenu de l'actualité")]),n("VueTrix",{attrs:{name:"text",inputId:"editor1",placeholder:"Contenu de l'actualité une fois étendue..."},model:{value:t.news.text,callback:function(e){t.$set(t.news,"text",e)},expression:"news.text"}})],1)],1),n("b-tr",[n("b-th",[n("label",{attrs:{for:"photo"}},[t._v("Image d'illustration / Photo")]),n("b-form-file",{attrs:{name:"photo",size:"sm",accept:"image/*",placeholder:"Choisir le fichier (.jpg/.jpeg/.png)...","drop-placeholder":"Placer l'image ici ..."},model:{value:t.news.photo,callback:function(e){t.$set(t.news,"photo",e)},expression:"news.photo"}})],1)],1)],1),n("b-tfoot")],1)],1)])],1)},at=[],st={name:"NewsAdd",components:{VueTrix:B["a"]},computed:{availableOptions:function(){var t=this;return this.$store.state.groupsoptions.filter((function(e){return-1===t.news.groups.indexOf(e)}))},shortdesccount:function(){return 190-this.shortdesc.length}},methods:{AddNews:function(){this.news.author=this.$store.state.username,this.news.groups=this.news.groups.join(";"),this.createNews(this.news)},createNews:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="apps/intranetagglo/news",n.next=4,l.a.post(Object(u["generateUrl"])(a),t,{type:"application/json"});case 4:s=n.sent,e.LastModifiedID=s.data.id,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error(n.t0);case 11:e.$store.commit("setNewsUpdating",!0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},toggleModal:function(){this.$refs["modal"].toggle("#toggle-btn")},formatdesc:function(t){return t.substring(0,190)},addphotos:function(t){return t.push(null)},addpdf:function(t){return t.push(null)}},data:function(){return{modal:!1,news:{author:"",title:"",subtitle:"",text:"",photo:"",category:"",groups:[],visible:0},groupsoptions:[],categoryoptions:[]}}},it=st,ot=Object(h["a"])(it,nt,at,!1,null,null,null),rt=ot.exports,ct={name:"News",props:{msg:String},components:{NewsComp:q,Apps:et,NewsAdd:rt},watch:{updating:function(t){var e=this;if(t){var n="apps/intranetagglo/";this.$store.state.usergroups.includes("admin")?n+="news/".concat(this.currentPage-1):n+="newsG/".concat(this.currentPage-1),l.a.post(Object(u["generateUrl"])(n),{id:3*(this.currentPage-1),search:this.search},{type:"application/json"}).then((function(t){e.news=t.data[0],e.rows=t.data[1],e.$store.commit("setNewsUpdating",!1)}))}}},data:function(){return{categorysearch:"",addNews:!1,AddNewsModal:!1,news:[],page:1,rows:0,focus:"",timer:void 0}},computed:{updating:function(){return this.$store.state.newsupdating},getNews:function(){return this.news},isAdmin:function(){return this.$store.state.usergroups.includes("admin")},search:{get:function(){return this.$store.state.search},set:function(t){this.$store.commit("updateSearch",t)}},currentPage:{get:function(){return this.page},set:function(t){this.page=t,this.$store.commit("setNewsUpdating",!0)}}},methods:{textSearch:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.$store.commit("setNewsUpdating",!0)}),1e3)},handleScroll:function(){var t=this,e=document.querySelectorAll(".news");setInterval((function(){}),1e3),e.forEach((function(e){var n=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;(n>=0||a<=0)&&(t.isActive=!1,e.classList.remove("active")),n<=300&&a>=0&&(t.isActive=!0,e.classList.add("active"))}))},closeNews:function(){this.focus=""}},mounted:function(){var t=this;l.a.get(Object(u["generateUrl"])("apps/intranetagglo/user")).then((function(e){t.$store.commit("setUser",e.data);var n="apps/intranetagglo/";e.data[1].includes("admin")?(n+="news/0",t.$store.dispatch("getGroupsOptions"),t.$store.dispatch("getCategoryOptions")):n+="newsG/0",l.a.post(Object(u["generateUrl"])(n),{id:0,search:""},{type:"application/json"}).then((function(e){t.news=e.data[0],t.rows=e.data[1],t.$store.commit("setNewsUpdating",!1)}))}))},destroyed:function(){var t=document.getElementById("news-container");t.removeEventListener("scroll",this.handleScroll)}},lt=ct,ut=(n("a3f4"),Object(h["a"])(lt,j,I,!1,null,"6eeba252",null)),dt=ut.exports,pt={name:"Home",components:{Navigation:_,Settings:$,News:dt},data:function(){return{darkmodestring:null,darkmode:null,patterns:"6",backgroundcolor:"2"}},watch:{darkmode:function(t){t?(localStorage.setItem("color_scheme","dark"),this.darkmodestring="dark",this.darkmode="dark"):(localStorage.setItem("color_scheme","light"),this.darkmodestring="")}},mounted:function(){document.getElementById("cog").addEventListener("click",(function(){document.getElementById("Settings").classList.toggle("hidden"),document.getElementById("apps-container").classList.toggle("hidden")}))},created:function(){var t=localStorage.getItem("color_scheme"),e=localStorage.getItem("patterns"),n=localStorage.getItem("variant");t&&("dark"===t?(this.darkmodestring="dark",this.darkmode=!0):this.darkmodestring=""),e&&(this.patterns=e),n&&(this.backgroundcolor=n)}},mt=pt,ft=Object(h["a"])(mt,s,i,!1,null,null,null),gt=ft.exports,ht=n("2f62");a["default"].use(ht["a"]);var bt=new ht["a"].Store({state:{search:"",username:"",usergroups:[],groupsoptions:[],categoryoptions:[],categoryfilter:"",appsupdating:!1,menuupdating:!1,newsupdating:!1},getters:{News_length:function(t){return t.News.length}},mutations:{updateSearch:function(t,e){t.search=e},updateCategories:function(t,e){t.categoryfilter=e},setUser:function(t,e){console.log(e),t.username=e[0],t.usergroups=e[1],console.log(t.username,t.usergroups)},setGroupsOptions:function(t,e){t.groupsoptions=e},setCategoryOptions:function(t,e){t.categoryoptions=e},setAppsUpdating:function(t,e){t.appsupdating=e},setMenuUpdating:function(t,e){t.menuupdating=e},setNewsUpdating:function(t,e){t.newsupdating=e}},actions:{getCategoryOptions:function(t){var e=t.commit;l.a.get(Object(u["generateOcsUrl"])("cloud/groups",2)).then((function(t){e("setGroupsOptions",t.data.ocs.data.groups)}))},getGroupsOptions:function(t){var e=t.commit;l.a.get(Object(u["generateUrl"])("apps/intranetagglo/news/category")).then((function(t){e("setGroupsOptions",t.data)}))}},modules:{}}),vt=(n("ab8b"),n("2dd8"),n("5f5b")),yt=n("b1e0");n("eab5"),n("5341"),n("868e"),n("3e16");a["default"].use(vt["a"]),a["default"].use(yt["a"]),a["default"].config.productionTip=!1,new a["default"]({store:bt,render:function(t){return t(gt)}}).$mount("#app")},"6fa2":function(t,e,n){},"868e":function(t,e,n){},a234:function(t,e,n){"use strict";n("bf54")},a3f4:function(t,e,n){"use strict";n("c26c")},bf54:function(t,e,n){},c26c:function(t,e,n){},ea6c:function(t,e,n){"use strict";n("0376")},eab5:function(t,e,n){}});
//# sourceMappingURL=app.5faeb3cb.js.map